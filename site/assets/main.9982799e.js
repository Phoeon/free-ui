import{d as C,r as x,z as T,V as _,o as v,a as p,F as q,B as N,u as j,g as z,A,p as E,f as F}from"./vendor.6c48bfff.js";import{a as k}from"./index.898e7603.js";const I={class:"ph-anchors"},R=["hover","onClick"],$=F("i",{class:"ph-anchor-indicator"},null,-1),H=C({props:{dataSource:{type:Array,default:()=>[]},modelValue:String},emits:["update:modelValue","navigate"],setup(c,{emit:s}){const a=c,w=x({hover:!("ontouchstart"in window)}),l={st:0,lock:!1},y=o=>{var t;if(o.value===a.modelValue)return;s("update:modelValue",o.value),s("navigate",o),l.lock=!0;const n=document.querySelector("#"+o.value);(t=n==null?void 0:n.scrollIntoViewIfNeeded)==null||t.call(n),window.setTimeout(()=>{l.lock=!1},50)},f=o=>{var m,g,S,V;const n=o.scrollTop-l.st>=0,t=document.documentElement.clientHeight;if(l.st=o.scrollTop,l.lock)return;const r=a.dataSource.filter(({value:h})=>{const e=document.querySelector("#"+h).getBoundingClientRect();return e.top<t&&e.top>=0||e.top+e.height<t&&e.top+e.height>=0||e.top<=0&&e.top+e.height>=t}),u=r.filter(({value:h})=>{const e=document.querySelector("#"+h).getBoundingClientRect();return e.top>0&&e.top+e.height<t||e.top<=0&&e.top+e.height>=t}),i=u.length?u:r;let d="";n?d=((m=i[i.length-1])==null?void 0:m.value)||((g=a.dataSource[a.dataSource.length-1])==null?void 0:g.value):d=((S=i[0])==null?void 0:S.value)||((V=a.dataSource[0])==null?void 0:V.value),s("update:modelValue",d)};return T(()=>{window.setTimeout(()=>{k.on("view-scroll",f)},50)}),_(()=>{k.off("view-scroll",f)}),(o,n)=>(v(),p("div",I,[(v(!0),p(q,null,N(c.dataSource,(t,r)=>(v(),p("div",{hover:j(w).hover&&t.value!=c.modelValue,class:z({"ph-anchor":!0,"ph-anchor-active":c.modelValue===t.value}),key:r,onClick:u=>y(t)},[$,A(" "+E(t.text),1)],10,R))),128))]))}});export{H as _};
