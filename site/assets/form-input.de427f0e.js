var D=Object.defineProperty;var x=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var E=(e,l,t)=>l in e?D(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,V=(e,l)=>{for(var t in l||(l={}))I.call(l,t)&&E(e,t,l[t]);if(x)for(var t of x(l))z.call(l,t)&&E(e,t,l[t]);return e};import{d as h,J as N,b as m,N as j,o as p,a as _,p as S,m as F,l as q,w as v,u as f,g as C,H as P,r as T,c as B,z as M,V as O,e as b,f as A,A as R,k as H,W as J,j as Q}from"./vendor.6c48bfff.js";import{a2 as g,a3 as y,c as U,f as W,a4 as G,d as K,a5 as L}from"./index.898e7603.js";import{_ as X}from"./input-wrap.c34eff16.js";function Y(e,l,t,a){g(e)?a({valid:!1,tip:"\u8BE5\u5B57\u6BB5\u4E0D\u53EF\u4E3A\u7A7A"}):t()}function Z(e,l,t,a){g(e)||y.Number.test(e)?t():a({valid:!1,tip:"\u975E\u6CD5\u6570\u5B57"})}function ee(e,l,t,a){g(e)||y.email.test(e)?t():a({valid:!1,tip:"\u975E\u6CD5\u90AE\u7BB1"})}function te(e,l,t,a){g(e)||y.url.test(e)?t():a({valid:!1,tip:"url\u5730\u5740\u683C\u5F0F\u9519\u8BEF"})}function ae(e,l,t,a){g(e)||y.mobile.test(e)?t():a({valid:!1,tip:"\u624B\u673A\u53F7\u7801\u683C\u5F0F\u9519\u8BEF"})}function le(e,l,t,a){g(e)||y.chinese.test(e)?t():a({valid:!1,tip:"\u8BF7\u8F93\u5165\u4E2D\u6587"})}function se(e,l,t,a){g(e)||l.test(e)?t():a({valid:!1,tip:`\u6B63\u5219\u5339\u914D\u5931\u8D25${l}.test(${e}) -> false`})}var re=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",required:Y,number:Z,email:ee,url:te,mobile:ae,chinese:le,regexp:se}),ie={create(){const e=[];return{use(l,t){e.push({task:l,args:t})},run(l){const t=e[Symbol.iterator]();return new Promise((a,r)=>{const i=()=>{const d=t.next();if(d.done)return a(!0);d.value.task(l,d.value.args,()=>i(),r)};i()})}}}};const _e=h({props:{validators:Object},setup(e,{expose:l}){const t=e,a={},r=(u,o)=>{const s=V(V({},re),t.validators||{}),n=ie.create();return o.forEach(c=>{if(typeof c=="string"&&s[c])n.use(s[c]);else{const k=c,w=s[k.name];w&&n.use(w,k.args)}}),n.run(u)},i=()=>Promise.all(Object.keys(a).map(u=>a[u]()));return N("validator",{validField:r,validForm:i,registerField:(u,o)=>{a[u]=o},ungisterField:u=>{delete a[u]}}),l({validForm:i}),(u,o)=>m(u.$slots,"default")}}),ue={key:0,class:"ph-form-header"},ne={key:1,class:"ph-form-action"},Fe=h({props:{title:String,sm:{type:Number,default:1},md:{type:Number,default:2},lg:{type:Number,default:2},xl:{type:Number,default:3}},setup(e){const l=j();return N("validator",null),(t,a)=>(p(),_("div",{class:C(["ph-form",e.title?"ph-form-hasheader":""])},[e.title?(p(),_("div",ue,S(e.title),1)):F("v-if",!0),q(U,{padding:"0",sm:e.sm,md:e.md,lg:e.lg,xl:e.xl},{default:v(()=>[m(t.$slots,"default")]),_:3},8,["sm","md","lg","xl"]),f(l).action?(p(),_("div",ne,[m(t.$slots,"action")])):F("v-if",!0)],2))}}),oe={},de={class:"ph-field-tip"};function ce(e,l){return p(),_("div",de,[m(e.$slots,"default")])}var fe=W(oe,[["render",ce]]);const pe={class:"ph-field-label"},me=h({props:{modelValue:[String,Number,Boolean,Array],type:String,size:String,label:String,flow:{type:String,default:"auto"},disabled:Boolean,placeholder:String,validators:Array},emits:["update:modelValue","input"],setup(e,{emit:l}){const t=e,a=P("validator"),r=G(),i=T({tip:"",valid:!0}),d=B(()=>t.validators?t.validators.some(s=>typeof s=="string"&&s==="required"?!0:s.name==="required"):!1),$=B(()=>({"ph-field":!0,"ph-field-required":d.value,"ph-field-hr":t.flow==="hr","ph-field-vt":t.flow==="vt","ph-field-auto":t.flow==="auto"})),u=(s,n)=>a.validField(s,n).then(c=>(i.valid=!0,i.tip="",Promise.resolve(!0))).catch(c=>(i.valid=!1,i.tip=c==null?void 0:c.tip,Promise.reject(c))),o=s=>{l("update:modelValue",s),l("input",s),!!t.validators&&(!a||u(s,t.validators))};return M(()=>{!t.validators||a&&a.registerField(r,()=>u(t.modelValue,t.validators))}),O(()=>{!t.validators||a&&a.ungisterField(r)}),(s,n)=>(p(),b(K,{class:C(f($))},{default:v(()=>[A("label",pe,S(e.label),1),m(s.$slots,"default",{onInput:o,value:e.modelValue,placeholder:e.placeholder,valid:f(i).valid,type:e.type,size:e.size,disabled:e.disabled}),f(i).valid?F("v-if",!0):(p(),b(fe,{key:0},{default:v(()=>[R(S(f(i).tip),1)]),_:1}))]),_:3},8,["class"]))}}),ve=["placeholder","disabled","type","value","onInput"],ge=h({props:{modelValue:[String,Number],type:String},emits:["update:modelValue","input"],setup(e,{emit:l}){const t=e,a=B(()=>t.type==="password"),r=H(!1),i=j(),d={lock:!1},$=o=>{const s=o.target;d.lock||(d.lock=!0,window.setTimeout(()=>{const n=s.value;l("update:modelValue",n),l("input",n),d.lock=!1},300))},u=B(()=>a.value?r.value?"text":"password":t.type);return(o,s)=>(p(),b(X,{type:e.type},J({default:v(n=>[A("input",{class:"ph-input",placeholder:n.placeholder,disabled:n.disabled,type:f(u),value:e.modelValue,onInput:Q($,["stop"])},null,40,ve)]),_:2},[f(i).left?{name:"left",fn:v(()=>[m(o.$slots,"left")])}:void 0,f(i).right||f(a)?{name:"right",fn:v(()=>[m(o.$slots,"right",{},()=>[f(a)?(p(),b(L,{key:0,open:!r.value,onClick:s[0]||(s[0]=n=>r.value=!r.value)},null,8,["open"])):F("v-if",!0)])])}:void 0]),1032,["type"]))}}),Be=h({setup(e){return(l,t)=>(p(),b(me,null,{default:v(a=>[q(ge,{modelValue:a.value,disabled:a.disabled,placeholder:a.placeholder,valid:a.valid,type:a.type,onInput:a.onInput},null,8,["modelValue","disabled","placeholder","valid","type","onInput"])]),_:1}))}});export{me as _,Fe as a,_e as b,Be as c};
