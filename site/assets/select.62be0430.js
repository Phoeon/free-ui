import{d as _,k as y,r as N,N as B,o as V,e as C,W as I,u as v,w as h,b as S,f,g as M,y as R,j as b,Z as $,c as K,l as F}from"./vendor.6c48bfff.js";import{a3 as x,a6 as G,i as P}from"./index.898e7603.js";import{_ as T}from"./input-wrap.c34eff16.js";const X=["placeholder","disabled","value","onChange","onInput","onKeydown"],q={class:"ph-number-addon"},z=["disabled","hover"],D=["disabled","hover"],J=_({props:{modelValue:Number,step:{type:Number,default:1},min:{type:Number,default:-Number.MAX_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER}},emits:["update:modelValue","input"],setup(d,{emit:m}){const o=d,i=y(),l={lock:!1,timer:-1,timer1:-1},u=N({valid:!0}),w=B(),p=e=>{m("update:modelValue",e),m("input",e)},s=(e,a=0)=>{const t=e.value.match(x.number),c=Number(t?t[0]:0)||0;return Math.min(o.max,Math.max(o.min,c+a))},r=(e,a)=>{const t=s(e,a);e.value=t+"",u.valid=!0,clearTimeout(l.timer),l.timer=window.setTimeout(()=>{p(t)},300)},n=e=>{const a=e.target;l.lock||(l.lock=!0,window.setTimeout(()=>{const t=s(a,0);a.value=t+"",u.valid=!0,p(t),l.lock=!1},300))},g=e=>{const a=e.target;clearTimeout(l.timer1),l.timer1=window.setTimeout(()=>{p(a.value),u.valid=x.Number.test(a.value)})},A=e=>{r(e.target,1)},E=e=>{r(e.target,-1)},k=e=>{r(i.value,e)};return(e,a)=>(V(),C(T,{class:"ph-number-wrap"},I({default:h(t=>[f("input",{class:M(["ph-number-ip",v(u).valid?"":"ph-input-warning"]),placeholder:t.placeholder,disabled:t.disabled,value:d.modelValue,ref:(c,j)=>{j.eip=c,R(i)&&(i.value=c)},onChange:b(n,["stop"]),onInput:b(g,["stop"]),onKeydown:[$(b(A,["prevent"]),["up"]),$(b(E,["prevent"]),["down"])]},null,42,X)]),right:h(t=>[S(e.$slots,"right",{},()=>[f("div",q,[f("button",{disabled:t.disabled,class:"ph-number-add",hover:!t.disabled&&t.hover,onClick:a[0]||(a[0]=c=>k(1))},null,8,z),f("button",{disabled:t.disabled,class:"ph-number-minus",hover:!t.disabled&&t.hover,onClick:a[1]||(a[1]=c=>k(-1))},null,8,D)])])]),_:2},[v(w).left?{name:"left",fn:h(()=>[S(e.$slots,"left")])}:void 0]),1024))}}),U=["placeholder","disabled","value"],L=_({props:{modelValue:{type:[Array,String,Number],required:!0},disabled:Boolean,placeholder:String,theme:String,options:{type:Array,default:()=>[]}},emits:["update:modelValue","input"],setup(d,{emit:m}){const o=d,i=y(),l=N({lock:!1}),u=K(()=>{const s=o.modelValue instanceof Array?o.modelValue:[o.modelValue];return o.options.filter(n=>s.includes(n.value)).map(n=>n.text).join(",")}),w=s=>{m("update:modelValue",s),m("input",s)},p=()=>{var r;if(o.disabled||l.lock)return;l.lock=!0;const s=((r=i.value)==null?void 0:r.$el).getBoundingClientRect();P.showPopSelect({dataSource:o.options,title:o.placeholder,value:o.modelValue,rect:s}).done(w),window.setTimeout(()=>{l.lock=!1},300)};return(s,r)=>(V(),C(T,{onClick:b(p,["stop"]),disabled:d.disabled,placeholder:d.placeholder,ref:(n,g)=>{g.ewrap=n,i.value=n}},{default:h(n=>[f("input",{class:"ph-select",readonly:!0,placeholder:n.placeholder,disabled:n.disabled,value:v(u)},null,8,U)]),right:h(()=>[F(v(G),{direction:"down"})]),_:1},8,["onClick","disabled","placeholder"]))}});export{J as _,L as a};
